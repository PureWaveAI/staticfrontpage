[phases.setup]
# Install nginx from Nixpkgs
nixPkgs = ['nginx']

[phases.build]
# Copy the static site (exactly the contents of ./app) into nginx's web root
cmd = 'mkdir -p /var/www/html && cp -r app/. /var/www/html/'

[start]
# Ensure log directory exists, then run nginx in the foreground
cmd = 'mkdir -p /var/log/nginx && nginx -g "daemon off;"'

[staticfile]
# Specify the directory where your static files are located after the build
# Common directories are "dist", "build", "public", etc.
publishDir = "build" 